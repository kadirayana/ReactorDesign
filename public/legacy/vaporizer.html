<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vaporizer Tasarım Hesaplayıcı</title>
  <link rel="stylesheet" href="responsive.css">
  <style>
    /* Genel stil ayarları */
    body {
      background: #f0f4f8;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    .container {
      background: #fff;
      padding: 20px 30px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      max-width: 900px;
      width: 100%;
      margin: 80px auto 20px;
    }
    h1, h2, h3 {
      text-align: center;
      color: #333;
    }
    .section {
      margin-bottom: 20px;
    }
    .section h2 {
      margin-bottom: 10px;
      color: #00539C;
      border-bottom: 2px solid #00539C;
      padding-bottom: 5px;
    }
    label {
      display: inline-block;
      width: 300px;
      font-weight: 500;
      margin-bottom: 5px;
      color: #333;
    }
    input {
      width: 150px;
      padding: 5px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
    }
    button {
      display: block;
      width: 200px;
      margin: 20px auto;
      padding: 10px;
      font-size: 16px;
      background: #00539C;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #003f7d;
    }
    nav {
      background-color: #00539C;
      padding: 15px 0;
      text-align: center;
      width: 100%;
      position: fixed;
      top: 0;
      z-index: 1000;
    }
    nav a {
      color: white;
      text-decoration: none;
      padding: 10px 15px;
      margin: 0 5px;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    nav a:hover {
      background-color: #003f7d;
    }
    #result {
      background: #e9f5ff;
      border: 1px solid #b3d7ff;
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
    }
    .form-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      margin-bottom: 10px;
    }
    .form-row label {
      flex: 1 0 300px;
    }
    .form-row input {
      flex: 1 0 150px;
    }
  </style>
</head>
<body>
    <a href="index.html" data-translate="home" data-section="nav">Ana Sayfa</a>
    <a href="reactor.html" data-translate="reactorDesign" data-section="nav">Reaktör Tasarım</a>
    <a href="reactorss.html" data-translate="customReactor" data-section="nav">Özelleştirilebilir Reaktör</a>
    <a href="chemical.html" data-translate="chemicalEquilibrium" data-section="nav">Kimyasal Denge</a>
    <a href="heattransfer.html" data-translate="heatTransfer" data-section="nav">Isı Transferi</a>
    <a href="heatintegration.html" data-translate="heatIntegration" data-section="nav">Isı Entegrasyonu</a>
    <a href="dynamics.html" data-translate="dynamicSimulation" data-section="nav">Dinamik Simülasyon</a>
    <a href="vaporizer.html" data-translate="vaporizerDesign" data-section="nav">Vaporizer Tasarım</a>
    <a href="history.html" data-translate="calculationHistory" data-section="nav">Hesaplama Geçmişi</a>
  </nav>

  <!-- header/navbar removed -->
  <div class="container">
    <h1>Vaporizer Tasarım Hesaplayıcı</h1>
    
    <div class="section">
      <h2>Feed & Süreç Verileri</h2>
      <div class="form-row">
        <label for="feedFlow">Feed Akış (kmol/h):</label>
        <input type="number" id="feedFlow" value="503.32">
      </div>
      <div class="form-row">
        <label for="vaporFraction">Vapor fraksiyonu:</label>
        <input type="number" id="vaporFraction" step="0.01" value="0.3">
      </div>
      <div class="form-row">
        <label for="T_feed_in">Feed Giriş Sıcaklığı (°C):</label>
        <input type="number" id="T_feed_in" value="-45.3">
      </div>
      <div class="form-row">
        <label for="T_feed_out">Feed Çıkış Sıcaklığı (°C):</label>
        <input type="number" id="T_feed_out" value="-37.9">
      </div>
      <div class="form-row">
        <label for="P_operating">Çalışma Basıncı (atm):</label>
        <input type="number" id="P_operating" step="0.1" value="1.6">
      </div>
    </div>
    
    <div class="section">
      <h2>Liquid-Vapor Karışım Özellikleri</h2>
      <div class="form-row">
        <label for="Pc_mix">Pc (atm):</label>
        <input type="number" id="Pc_mix" step="0.01" value="53.57">
      </div>
      <div class="form-row">
        <label for="dHvap_mix">ΔHvap (kJ/kmol):</label>
        <input type="number" id="dHvap_mix" value="18017">
      </div>
      <div class="form-row">
        <label for="Cp_mix">Cp (kJ/kmolK):</label>
        <input type="number" id="Cp_mix" value="101.2">
      </div>
    </div>
    
    <div class="section">
      <h2>Soğutma Suyu Özellikleri</h2>
      <div class="form-row">
        <label for="T_water_in">Su Giriş Sıcaklığı (°C):</label>
        <input type="number" id="T_water_in" value="50">
      </div>
      <div class="form-row">
        <label for="T_water_out">Su Çıkış Sıcaklığı (°C):</label>
        <input type="number" id="T_water_out" value="35">
      </div>
      <div class="form-row">
        <label for="k_water">Isı İletkenliği, k (W/mK):</label>
        <input type="number" id="k_water" step="0.001" value="0.598">
      </div>
      <div class="form-row">
        <label for="Cp_water">Cp (kJ/kgK):</label>
        <input type="number" id="Cp_water" step="0.01" value="4.18">
      </div>
      <div class="form-row">
        <label for="rho_water">Yoğunluk (kg/m³):</label>
        <input type="number" id="rho_water" value="1000">
      </div>
      <div class="form-row">
        <label for="mu_water">Viskozite (kg/m·s):</label>
        <input type="number" id="mu_water" step="0.00001" value="0.0001">
      </div>
    </div>
    
    <div class="section">
      <h2>Tüp & Fouling Verileri</h2>
      <div class="form-row">
        <label for="tubeLength">Tüp Uzunluğu, L (m):</label>
        <input type="number" id="tubeLength" step="0.1" value="3">
      </div>
      <div class="form-row">
        <label for="d0">Dış Tüp Çapı, d₀ (m):</label>
        <input type="number" id="d0" step="0.0001" value="0.0254">
      </div>
      <div class="form-row">
        <label for="di">İç Tüp Çapı, dᵢ (m):</label>
        <input type="number" id="di" step="0.0001" value="0.0218">
      </div>
      <div class="form-row">
        <label for="Rf_o">Fouling Faktörü, Rf,o (m²K/W):</label>
        <input type="number" id="Rf_o" step="0.0001" value="0.0005">
      </div>
      <div class="form-row">
        <label for="Rf_i">Fouling Faktörü, Rf,i (m²K/W):</label>
        <input type="number" id="Rf_i" step="0.0001" value="0.0003">
      </div>
      <div class="form-row">
        <label for="k_tube">Tüp Malzeme Isı İletkenliği (W/mK):</label>
        <input type="number" id="k_tube" step="0.1" value="14">
      </div>
      <div class="form-row">
        <label for="U_initial">Varsayılan Başlangıç U (W/m²K):</label>
        <input type="number" id="U_initial" value="740">
      </div>
      <div class="form-row">
        <label for="freeboard">Freeboard (m):</label>
        <input type="number" id="freeboard" step="0.01" value="0.08">
      </div>
      <div class="form-row">
        <label for="iterations">İterasyon Sayısı:</label>
        <input type="number" id="iterations" min="1" max="10" step="1" value="2">
      </div>
    </div>
    
    <button onclick="calculateDesign()">Tasarımı Hesapla</button>
    
    <div id="result"></div>
    
    <!-- 3D model için konteyner -->
    <div id="threeContainer" style="width: 100%; height: 500px; margin-top: 30px; border-radius: 8px; overflow: hidden;"></div>
  </div>

  <script>
    function calculateDesign() {
      // Girdi değerlerini al
      const feedFlow = parseFloat(document.getElementById("feedFlow").value); // kmol/h
      const vaporFraction = parseFloat(document.getElementById("vaporFraction").value);
      const T_feed_in = parseFloat(document.getElementById("T_feed_in").value); // °C
      const T_feed_out = parseFloat(document.getElementById("T_feed_out").value); // °C
      const P_operating = parseFloat(document.getElementById("P_operating").value); // atm

      // Hesaplama sonucunu kaydet
      let kayit = {
          tip: "Vaporizer Tasarım",
          feedFlow: feedFlow,
          vaporFraction: vaporFraction,
          T_in: T_feed_in,
          T_out: T_feed_out,
          P: P_operating,
          tarih: new Date().toISOString(),
          sonuc: feedFlow * vaporFraction // Burada gerçek sonuç değerini ekleyin
      };
      
      let hesaplamalar = JSON.parse(localStorage.getItem("hesaplamalar")) || [];
      hesaplamalar.push(kayit);
      localStorage.setItem("hesaplamalar", JSON.stringify(hesaplamalar));

      const Pc_mix = parseFloat(document.getElementById("Pc_mix").value); // atm
      const dHvap_mix = parseFloat(document.getElementById("dHvap_mix").value); // kJ/kmol
      const Cp_mix = parseFloat(document.getElementById("Cp_mix").value); // kJ/kmolK

      const T_water_in = parseFloat(document.getElementById("T_water_in").value); // °C
      const T_water_out = parseFloat(document.getElementById("T_water_out").value); // °C
      const k_water = parseFloat(document.getElementById("k_water").value); // W/mK
      const Cp_water = parseFloat(document.getElementById("Cp_water").value); // kJ/kgK
      const rho_water = parseFloat(document.getElementById("rho_water").value); // kg/m³
      const mu_water = parseFloat(document.getElementById("mu_water").value); // kg/m·s

      const tubeLength = parseFloat(document.getElementById("tubeLength").value); // m
      const d0 = parseFloat(document.getElementById("d0").value); // m
      const di = parseFloat(document.getElementById("di").value); // m

      const Rf_o = parseFloat(document.getElementById("Rf_o").value); // m²K/W
      const Rf_i = parseFloat(document.getElementById("Rf_i").value); // m²K/W

      const k_tube = parseFloat(document.getElementById("k_tube").value); // W/mK
      const U_initial = parseFloat(document.getElementById("U_initial").value); // W/m²K
      const freeboard = parseFloat(document.getElementById("freeboard").value); // m
      const iterations = parseInt(document.getElementById("iterations").value); // İterasyon sayısı

      // Adım 1: Isı yükü hesaplaması
      const moles_vapor = vaporFraction * feedFlow; // kmol/h
      const moles_liquid = (1 - vaporFraction) * feedFlow; // kmol/h
      
      const deltaT_feed = T_feed_out - T_feed_in; // °C (pozitif)
      const Q1 = moles_liquid * Cp_mix * deltaT_feed; // kJ/h (hassas ısı)
      const Q2 = moles_liquid * dHvap_mix;            // kJ/h (buharlaşma)
      const Q_total_kJ_h = Q1 + Q2;                     // kJ/h
      const Q_total_kW = Q_total_kJ_h / 3600;           // kW
      const Q_total_W = Q_total_kW * 1000;              // W

      // Adım 2: Soğutma suyu kütle akışı
      const deltaT_water = T_water_in - T_water_out; // °C
      const m_water = Q_total_kW / (Cp_water * deltaT_water); // kg/s

      // LMTD hesaplaması:
      const deltaT1 = Math.abs(T_water_in - T_feed_out);
      const deltaT2 = Math.abs(T_water_out - T_feed_in);
      const LMTD = (deltaT1 - deltaT2) / Math.log(deltaT1 / deltaT2);

      // İterasyon sonuçlarını saklamak için diziler
      const iterationResults = [];
      let U_current = U_initial;
      let A_current, N_tubes_current, v_water_current, Re_current, Nu_current, h_i_current;
      let q_flux_current, h_nb_current, R_water_side_current, R_total_current, U_calc_current;
      
      // Tüp başına dış alan: A_tube = π * d0 * L
      const A_tube = Math.PI * d0 * tubeLength; // m²
      
      // İterasyon döngüsü
      for (let i = 0; i < iterations; i++) {
        // Isı transfer alanı hesaplaması
        A_current = Q_total_W / (U_current * LMTD);
        N_tubes_current = A_current / A_tube;
        
        // Tüp içi (su) parametreleri
        const area_inner = Math.PI * Math.pow(di, 2) / 4; // Her tüpün iç kesit alanı (m²)
        v_water_current = m_water / (rho_water * N_tubes_current * area_inner); // m/s
        Re_current = (rho_water * v_water_current * di) / mu_water;
        // Prandtl sayısı: Cp (J/kgK) cinsinden kullanılacak
        const Pr = ((Cp_water * 1000) * mu_water) / k_water;
        // Turbulent akış için: Nu = 0.024 * Re^0.8 * Pr^(1/3)
        Nu_current = 0.024 * Math.pow(Re_current, 0.8) * Math.pow(Pr, 1/3);
        h_i_current = (Nu_current * k_water) / di; // W/m²K
        
        // Kabuk tarafı (nükleat buharlaşma) katsayısı
        const P_reduced = P_operating / Pc_mix;
        q_flux_current = Q_total_W / A_current; // W/m²
        h_nb_current = 0.104 * Math.pow(Pc_mix, 0.69) * Math.pow(q_flux_current, 0.7) *
                     (1.8 * Math.pow(P_reduced, 0.17) + 4 * Math.pow(P_reduced, 1.2) + 10 * Math.pow(P_reduced, 10));
        
        // Genel ısı transfer katsayısı
        const R_tube_wall = (d0 / (2 * k_tube)) * Math.log(d0 / di);
        R_water_side_current = (d0 / di) * (1 / h_i_current);
        const R_fouling = Rf_o + (d0 / di) * Rf_i;
        const R_vapor = 1 / h_nb_current;
        R_total_current = R_vapor + R_tube_wall + R_water_side_current + R_fouling;
        U_calc_current = 1 / R_total_current; // W/m²K
        
        // Sonuçları sakla
        iterationResults.push({
          iteration: i + 1,
          U: U_current,
          A: A_current,
          N_tubes: N_tubes_current,
          v_water: v_water_current,
          Re: Re_current,
          h_i: h_i_current,
          h_nb: h_nb_current,
          U_calc: U_calc_current
        });
        
        // Bir sonraki iterasyon için U değerini güncelle
        U_current = U_calc_current;
      }
      
      // Son iterasyonun sonuçlarını al
      const lastResult = iterationResults[iterationResults.length - 1];
      
      // Freeboard kontrolü
      // Bundle çapı: Db = d0 * (N_tubes^0.249)^(1/2.207)
      const Db = d0 * Math.pow(Math.pow(lastResult.N_tubes, 0.249), 1/2.207);
      const Ds = 2 * Db;
      const freeboard_ratio = freeboard / Ds;

      // Sonuçları oluştur
      let results = `<h2>Tasarım Sonuçları</h2>`;
      results += `<p><strong>Isı Yükü:</strong> ${Q_total_kJ_h.toFixed(0)} kJ/h (${Q_total_kW.toFixed(2)} kW)</p>`;
      results += `<p><strong>Su Kütle Akışı:</strong> ${m_water.toFixed(2)} kg/s</p>`;
      results += `<p><strong>LMTD:</strong> ${LMTD.toFixed(2)} °C</p>`;
      
      // İterasyon sonuçlarını göster
      for (let i = 0; i < iterationResults.length; i++) {
        const result = iterationResults[i];
        results += `<h3>İterasyon ${result.iteration} (U = ${result.U.toFixed(0)} W/m²K)</h3>`;
        results += `<p><strong>Isı Transfer Alanı:</strong> ${result.A.toFixed(2)} m²</p>`;
        results += `<p><strong>Tüp Sayısı:</strong> ${result.N_tubes.toFixed(0)}</p>`;
        results += `<p><strong>Su Hızı:</strong> ${result.v_water.toFixed(2)} m/s</p>`;
        results += `<p><strong>Reynolds Sayısı:</strong> ${result.Re.toFixed(0)}</p>`;
        results += `<p><strong>Su Tarafı h (hᵢ):</strong> ${result.h_i.toFixed(0)} W/m²K</p>`;
        results += `<p><strong>Kabuk Tarafı h (hₙb):</strong> ${result.h_nb.toFixed(0)} W/m²K</p>`;
        results += `<p><strong>Hesaplanan U:</strong> ${result.U_calc.toFixed(0)} W/m²K</p>`;
      }
      
      results += `<h3>Tasarım Kontrolleri</h3>`;
      results += `<p><strong>Bundle Çapı (Db):</strong> ${Db.toFixed(3)} m</p>`;
      results += `<p><strong>Shell Çapı (Ds):</strong> ${Ds.toFixed(3)} m</p>`;
      results += `<p><strong>Freeboard Oranı (h/Ds):</strong> ${freeboard_ratio.toFixed(3)}</p>`;
      
      document.getElementById("result").innerHTML = results;
      
      // 3D modeli güncelle
      updateVaporizerModel(lastResult.N_tubes, Ds, tubeLength);
    }
  </script>
  
  <!-- Three.js kütüphanesini ekle -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  
  <!-- Note: threeContainer is already defined above, removing duplicate div -->
  
  <script>
    // 3D Modelleme
    let scene, camera, renderer, cylinder, tubeGroup;
    let controls;
    
    function initThreeJS() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(75, window.innerWidth / 400, 0.1, 1000);
      renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
      renderer.setSize(document.getElementById('threeContainer').offsetWidth, 400);
      document.getElementById('threeContainer').appendChild(renderer.domElement);
      
      // Ölçeklendirme iyileştirilmiş silindir (vaporizer)
      const geometry = new THREE.CylinderGeometry(2, 2, 10, 64);
      const material = new THREE.MeshStandardMaterial({ color: 0x0077ff, metalness: 0.5, roughness: 0.2, transparent: true, opacity: 0.7 });
      cylinder = new THREE.Mesh(geometry, material);
      scene.add(cylinder);
      
      // Tüpler için grup
      tubeGroup = new THREE.Group();
      scene.add(tubeGroup);
      
      // Işıklandırmayı geliştirme
      const pointLight = new THREE.PointLight(0xffffff, 1.2, 100);
      pointLight.position.set(5, 5, 5);
      scene.add(pointLight);

      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 1);
      hemiLight.position.set(0, 10, 0);
      scene.add(hemiLight);

      const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
      scene.add(ambientLight);
      
      // Kamera başlangıç pozisyonu
      camera.position.set(0, 5, 15);
      
      // OrbitControls ile etkileşim
      controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.1;
      controls.rotateSpeed = 0.3;
      
      // Pencere boyutu değiştiğinde
      window.addEventListener('resize', onWindowResize, false);
      
      // İlk render
      animate();
    }
    
    function onWindowResize() {
      camera.aspect = document.getElementById('threeContainer').offsetWidth / 400;
      camera.updateProjectionMatrix();
      renderer.setSize(document.getElementById('threeContainer').offsetWidth, 400);
    }
    
    // Etiket (text sprite) oluşturmak için yardımcı fonksiyon
    function makeTextSprite(message, parameters) {
      parameters = parameters || {};
      const fontface = parameters.fontface || "Arial";
      const fontsize = parameters.fontsize || 24;
      const borderThickness = parameters.borderThickness || 2;
      const borderColor = parameters.borderColor || {r:0, g:0, b:0, a:1.0};
      const backgroundColor = parameters.backgroundColor || {r:255, g:255, b:255, a:1.0};
      
      const canvas = document.createElement('canvas');
      const context = canvas.getContext('2d');
      context.font = fontsize + "px " + fontface;
      const metrics = context.measureText(message);
      const textWidth = metrics.width;
      canvas.width = textWidth + borderThickness * 2;
      canvas.height = fontsize * 1.4 + borderThickness * 2;
      
      // Arka plan ve çerçeve
      context.fillStyle = `rgba(${backgroundColor.r},${backgroundColor.g},${backgroundColor.b},${backgroundColor.a})`;
      context.fillRect(0, 0, canvas.width, canvas.height);
      context.strokeStyle = `rgba(${borderColor.r},${borderColor.g},${borderColor.b},${borderColor.a})`;
      context.lineWidth = borderThickness;
      context.strokeRect(0, 0, canvas.width, canvas.height);
      
      // Yazı
      context.fillStyle = "rgba(0, 0, 0, 1.0)";
      context.textAlign = "center";
      context.textBaseline = "middle";
      context.fillText(message, canvas.width/2, canvas.height/2);
      
      const texture = new THREE.Texture(canvas);
      texture.needsUpdate = true;
      const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
      const sprite = new THREE.Sprite(spriteMaterial);
      sprite.scale.set(canvas.width/50, canvas.height/50, 1);
      return sprite;
    }
    
    function updateVaporizerModel(tubeCount, shellDiameter, tubeLength) {
      // Eski tüpleri temizle
      while(tubeGroup.children.length > 0) { 
        tubeGroup.remove(tubeGroup.children[0]); 
      }
      
      // Eski etiketleri temizle
      clearLabels();
      
      // Shell boyutunu güncelle (ölçeklendirme)
      const scale = shellDiameter / 400; // Ölçeklendirme faktörü (cm için ayarlandı)
      cylinder.scale.set(scale, tubeLength/1000, scale);
      
      // Maksimum görselleştirilecek tüp sayısı (performans için)
      const maxTubes = Math.min(tubeCount, 100);
      
      // Tüpleri ekle
      const tubeMaterial = new THREE.MeshStandardMaterial({ color: 0xcccccc, metalness: 0.8, roughness: 0.2 });
      const tubeRadius = 10; // cm cinsinden tüp yarıçapı
      const tubeGeometry = new THREE.CylinderGeometry(tubeRadius, tubeRadius, tubeLength * 100, 16);
      
      // Tüpleri dağıt
      for (let i = 0; i < maxTubes; i++) {
        const tube = new THREE.Mesh(tubeGeometry, tubeMaterial);
        
        // Tüpleri shell içinde dağıt
        const angle = (i / maxTubes) * Math.PI * 2;
        const radius = (shellDiameter * 50) * 0.8 * Math.random(); // Shell içinde rastgele dağılım (cm)
        
        tube.position.x = Math.cos(angle) * radius;
        tube.position.z = Math.sin(angle) * radius;
        
        tubeGroup.add(tube);
      }
      
      // Etiketler ekle
      // Shell etiketi
      const shellLabel = makeTextSprite("Shell Çapı: " + (shellDiameter * 100).toFixed(2) + " cm", {
        fontsize: 18,
        backgroundColor: {r:255, g:255, b:255, a:0.8}
      });
      shellLabel.position.set(shellDiameter * 50 + 100, 0, 0);
      scene.add(shellLabel);
      
      // Tüp sayısı etiketi
      const tubeCountLabel = makeTextSprite("Tüp Sayısı: " + Math.round(tubeCount), {
        fontsize: 18,
        backgroundColor: {r:255, g:255, b:255, a:0.8}
      });
      tubeCountLabel.position.set(0, -tubeLength * 50 - 100, 0);
      scene.add(tubeCountLabel);
      
      // Tüp uzunluğu etiketi
      const tubeLengthLabel = makeTextSprite("Tüp Uzunluğu: " + (tubeLength * 100).toFixed(1) + " cm", {
        fontsize: 18,
        backgroundColor: {r:255, g:255, b:255, a:0.8}
      });
      tubeLengthLabel.position.set(shellDiameter * 50 + 100, 0, 0);
      scene.add(tubeLengthLabel);
    }
    
    // Animasyon döngüsü
    function animate() {
      requestAnimationFrame(animate);
      if (controls) controls.update();
      if (renderer && scene && camera) renderer.render(scene, camera);
    }
    
    // Etiketleri temizlemek için yardımcı fonksiyon
    function clearLabels() {
      // Etiketleri bulmak için scene içindeki tüm sprite'ları kontrol et
      for (let i = scene.children.length - 1; i >= 0; i--) {
        const object = scene.children[i];
        if (object instanceof THREE.Sprite) {
          scene.remove(object);
        }
      }
    }
    
    // Sayfa yüklendiğinde 3D modeli başlat
    window.addEventListener('load', function() {
      initThreeJS();
      // Varsayılan değerlerle modeli oluştur (200 cm çap, 300 cm uzunluk)
      updateVaporizerModel(50, 2, 3);
      
      // Hesaplama butonuna tıklandığında 3D modelin güncellenmesini sağla
      document.querySelector('button').addEventListener('click', function() {
        // calculateDesign fonksiyonu zaten updateVaporizerModel'i çağırıyor
        // Burada ek bir işlem yapmaya gerek yok
      });
    });
  </script>
</body>
</html>
